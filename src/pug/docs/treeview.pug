extends ../_docs-template

block vars
  - var title = 'Treeview | Framework7 Documentation';

block content
  include ../_docs-demo-device

  .docs-nav
    include ../_docs-menu
  .docs-content

    h1 Treeview
    ul.docs-index
    h2 Treeview Layout
    :code(lang="html")
      <!-- Treeview container -->
      <div class="treeview">
        <!-- Treeview item -->
        <div class="treeview-item">
          <!-- Item root element -->
          <div class="treeview-item-root">
            <!-- Item toggle (to open children on click) -->
            <div class="treeview-toggle"></div>
            <!-- Item content -->
            <div class="treeview-item-content">
              <!-- Item checkbox (optional) -->
              <label class="checkbox">...</label>
              <!-- Item icon (optional) -->
              <i class="icon f7-icons">folder_fill</i>
              <!-- Item label -->
              <div class="treeview-item-label">Item 1</div>
            </div>
          </div>
          <!-- Item children -->
          <div class="treeview-item-children">
            <!-- Children item. It has same recursive layout -->
            <div class="treeview-item">
              <div class="treeview-item-root">
                ...
              </div>
              <div class="treeview-item-children">
                ...
              </div>
            </div>
            <!-- Another children item -->
            <div class="treeview-item">...</div>
          </div>
        </div>
        <!-- Another item -->
        <div class="treeview-item">...</div>
        <!-- Item without children -->
        <div class="treeview-item">
          <div class="treeview-item-root">
            <div class="treeview-item-content">
              <div class="treeview-item-label">Item 3</div>
            </div>
          </div>
        </div>
      </div>
    h3 Treeview Item Link
    p If we need some treeview item to be just a link, we just need to use <code>&lt;a&gt;</code> tag for treeview-item-root element:
    :code(lang="html")
      <div class="treeview">
        ...
        <div class="treeview-item">
          <a href="/about/" class="treeview-item-root">
            <div class="treeview-item-content">
              <i class="icon f7-icons">link</i>
              <div class="treeview-item-label">About</div>
            </div>
          </a>
        </div>
        ...
      </div>
    h3 Treeview Item Toggle
    p Instead of toggle (or in addition) button, we can make whole treeview item work like a toggle. In this case we need to add <code>treeview-item-toggle</code> to treeview item root element:
    :code(lang="html")
      <div class="treeview">
        ...
        <div class="treeview-item">
        <!-- additional "treeview-item-toggle" class -->
          <div class="treeview-item-root treeview-item-toggle">
            <div class="treeview-toggle"></div>
            <div class="treeview-item-content">
              <i class="icon f7-icons">folder_fill</i>
              <div class="treeview-item-label">images</div>
            </div>
          </div>
          <div class="treeview-item-children">
            ...
          </div>
        </div>
        ...
      </div>
    h3 Treeview Selectable Item
    p We can also make treeview item selectable. In this case we need to add <code>treeview-item-selectable</code> to treeview item root element, and <code>treeview-item-selected</code> to selected item root element:
    :code(lang="html")
      <div class="treeview">
        ...
        <div class="treeview-item">
          <!-- additional "treeview-item-selectable" class -->
          <div class="treeview-item-root treeview-item-selectable">
            <div class="treeview-toggle"></div>
            <div class="treeview-item-content">
              <i class="icon f7-icons">folder_fill</i>
              <div class="treeview-item-label">images</div>
            </div>
          </div>
          <div class="treeview-item-children">
            ...
          </div>
        </div>
        <div class="treeview-item">
          <!-- additional "treeview-item-selected" class on selected item -->
          <div class="treeview-item-root treeview-item-selectable treeview-item-selected">
            <div class="treeview-toggle"></div>
            <div class="treeview-item-content">
              <i class="icon f7-icons">folder_fill</i>
              <div class="treeview-item-label">documents</div>
            </div>
          </div>
          <div class="treeview-item-children">
            ...
          </div>
        </div>
        ...
      </div>
    h2 Treeview App Methods
    p Let's look at related App methods to work with Treeview:
    .method-wrap
      p
        span.method app.treeview.open(<span>el</span>)
        | - open (expand) Treeview item
      ul.method-parameters
        li
          span.parameter el
          |  - <span class="parameter-type">HTMLElement</span> or <span class="parameter-type">string</span> (with CSS Selector). Treeview item element to open.
    .method-wrap
      p
        span.method app.treeview.close(<span>el</span>)
        | - close (collapse) Treeview item
      ul.method-parameters
        li
          span.parameter el
          |  - <span class="parameter-type">HTMLElement</span> or <span class="parameter-type">string</span> (with CSS Selector). Treeview item element to close.
    .method-wrap
      p
        span.method app.treeview.toggle(<span>el</span>)
        | - toggle (open or close) Treeview item
      ul.method-parameters
        li
          span.parameter el
          |  - <span class="parameter-type">HTMLElement</span> or <span class="parameter-type">string</span> (with CSS Selector). Treeview item element to toggle.

    h2 Treeview Events
    p Sheet will fire the following DOM events on sheet element and events on app and sheet instance:
    h3 DOM Events
    table.events-table
      thead
        tr
          th Event
          th Target
          th Description
      tbody
        tr
          td treeview:open
          td Treeview Item Element<span>&lt;div class="treeview-item"&gt;</span>
          td Event will be triggered on Treeview item open
        tr
          td treeview:close
          td Treeview Item Element<span>&lt;div class="treeview-item"&gt;</span>
          td Event will be triggered on Treeview item close
        tr
          td treeview:loadchildren
          td Treeview Item Element<span>&lt;div class="treeview-item"&gt;</span>
          td Event will be triggered on first open of Treeview item with <code>treeview-load-children</code> class. In <code>event.detail</code> it contains function to hide loading preloader.
    h3 App Events
    p Treeview also emits events on app instance.
    table.events-table
      thead
        tr
          th Event
          th Target
          th Description
      tbody
        tr
          td treeviewOpen
          td <span>(itemEl)</span>
          td app
          td Event will be triggered on Treeview item open
        tr
          td treeviewClose
          td <span>(itemEl)</span>
          td app
          td Event will be triggered on Treeview item close
        tr
          td treeviewLoadChildren
          td <span>(itemEl, done)</span>
          td app
          td Event will be triggered on first open of Treeview item with <code>treeview-load-children</code> class. As second argument it has function to hide loading preloader.

    h2 Load Children
    p It is also possible to load children on treeview item open. To make it work, we, at first, need to add <code>treeview-load-children</code> class to such treeview item. And then listen for <code>treeview:loadchildren</code> event to proceed with loading. Check the examples below for implementation example.

    +cssVars('treeview')

    .with-device
      h2(data-device-preview="../docs-demos/core/treeview.html") Examples
      h4 Basic Tree View
      :code(lang="html")
        <div class="treeview">
          <div class="treeview-item">
            <div class="treeview-item-root">
              <div class="treeview-toggle"></div>
              <div class="treeview-item-content">
                <div class="treeview-item-label">Item 1</div>
              </div>
            </div>
            <div class="treeview-item-children">
              <div class="treeview-item">
                <div class="treeview-item-root">
                  <div class="treeview-toggle"></div>
                  <div class="treeview-item-content">
                    <div class="treeview-item-label">Sub Item 1</div>
                  </div>
                </div>
                <div class="treeview-item-children">
                  <div class="treeview-item">
                    <div class="treeview-item-root">
                      <div class="treeview-item-content">
                        <div class="treeview-item-label">Sub Sub Item 1</div>
                      </div>
                    </div>
                  </div>
                  <div class="treeview-item">
                    <div class="treeview-item-root">
                      <div class="treeview-item-content">
                        <div class="treeview-item-label">Sub Sub Item 2</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="treeview-item">
                <div class="treeview-item-root">
                  <div class="treeview-toggle"></div>
                  <div class="treeview-item-content">
                    <div class="treeview-item-label">Sub Item 2</div>
                  </div>
                </div>
                <div class="treeview-item-children">
                  <div class="treeview-item">
                    <div class="treeview-item-root">
                      <div class="treeview-item-content">
                        <div class="treeview-item-label">Sub Sub Item 1</div>
                      </div>
                    </div>
                  </div>
                  <div class="treeview-item">
                    <div class="treeview-item-root">
                      <div class="treeview-item-content">
                        <div class="treeview-item-label">Sub Sub Item 2</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="treeview-item">
            <div class="treeview-item-root">
              <div class="treeview-toggle"></div>
              <div class="treeview-item-content">
                <div class="treeview-item-label">Item 2</div>
              </div>
            </div>
            <div class="treeview-item-children">
              <div class="treeview-item">
                <div class="treeview-item-root">
                  <div class="treeview-toggle"></div>
                  <div class="treeview-item-content">
                    <div class="treeview-item-label">Sub Item 1</div>
                  </div>
                </div>
                <div class="treeview-item-children">
                  <div class="treeview-item">
                    <div class="treeview-item-root">
                      <div class="treeview-item-content">
                        <div class="treeview-item-label">Sub Sub Item 1</div>
                      </div>
                    </div>
                  </div>
                  <div class="treeview-item">
                    <div class="treeview-item-root">
                      <div class="treeview-item-content">
                        <div class="treeview-item-label">Sub Sub Item 2</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="treeview-item">
                <div class="treeview-item-root">
                  <div class="treeview-toggle"></div>
                  <div class="treeview-item-content">
                    <div class="treeview-item-label">Sub Item 2</div>
                  </div>
                </div>
                <div class="treeview-item-children">
                  <div class="treeview-item">
                    <div class="treeview-item-root">
                      <div class="treeview-item-content">
                        <div class="treeview-item-label">Sub Sub Item 1</div>
                      </div>
                    </div>
                  </div>
                  <div class="treeview-item">
                    <div class="treeview-item-root">
                      <div class="treeview-item-content">
                        <div class="treeview-item-label">Sub Sub Item 2</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="treeview-item">
            <div class="treeview-item-root">
              <div class="treeview-item-content">
                <div class="treeview-item-label">Item 3</div>
              </div>
            </div>
          </div>
        </div>
      h4 With Icons
      :code(lang="html")
        <div class="treeview">
          <div class="treeview-item">
            <div class="treeview-item-root">
              <div class="treeview-toggle"></div>
              <div class="treeview-item-content">
                <i class="icon f7-icons">folder_fill</i>
                <div class="treeview-item-label">images</div>
              </div>
            </div>
            <div class="treeview-item-children">
              <div class="treeview-item">
                <div class="treeview-item-root">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">images_fill</i>
                    <div class="treeview-item-label">avatar.png</div>
                  </div>
                </div>
              </div>
              <div class="treeview-item">
                <div class="treeview-item-root">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">images_fill</i>
                    <div class="treeview-item-label">background.jpg</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="treeview-item">
            <div class="treeview-item-root">
              <div class="treeview-toggle"></div>
              <div class="treeview-item-content">
                <i class="icon f7-icons">folder_fill</i>
                <div class="treeview-item-label">documents</div>
              </div>
            </div>
            <div class="treeview-item-children">
              <div class="treeview-item">
                <div class="treeview-item-root">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">document_text_fill</i>
                    <div class="treeview-item-label">cv.docx</div>
                  </div>
                </div>
              </div>
              <div class="treeview-item">
                <div class="treeview-item-root">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">document_text_fill</i>
                    <div class="treeview-item-label">info.docx</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="treeview-item">
            <div class="treeview-item-root">
              <div class="treeview-item-content">
                <i class="icon f7-icons">logo_github</i>
                <div class="treeview-item-label">.gitignore</div>
              </div>
            </div>
          </div>
          <div class="treeview-item">
            <div class="treeview-item-root">
              <div class="treeview-item-content">
                <i class="icon f7-icons">document_text_fill</i>
                <div class="treeview-item-label">index.html</div>
              </div>
            </div>
          </div>
        </div>
      h4 With Checkboxes
      :code(lang="html")
        <div class="treeview">
          <div class="treeview-item">
            <div class="treeview-item-root">
              <div class="treeview-toggle"></div>
              <div class="treeview-item-content">
                <label class="checkbox">
                  <input type="checkbox">
                  <i class="icon-checkbox"></i>
                </label>
                <i class="icon f7-icons">folder_fill</i>
                <div class="treeview-item-label">images</div>
              </div>
            </div>
            <div class="treeview-item-children">
              <div class="treeview-item">
                <div class="treeview-item-root">
                  <div class="treeview-item-content">
                    <label class="checkbox">
                      <input type="checkbox">
                      <i class="icon-checkbox"></i>
                    </label>
                    <i class="icon f7-icons">images_fill</i>
                    <div class="treeview-item-label">avatar.png</div>
                  </div>
                </div>
              </div>
              <div class="treeview-item">
                <div class="treeview-item-root">
                  <div class="treeview-item-content">
                    <label class="checkbox">
                      <input type="checkbox">
                      <i class="icon-checkbox"></i>
                    </label>
                    <i class="icon f7-icons">images_fill</i>
                    <div class="treeview-item-label">background.jpg</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="treeview-item">
            <div class="treeview-item-root">
              <div class="treeview-toggle"></div>
              <div class="treeview-item-content">
                <label class="checkbox">
                  <input type="checkbox">
                  <i class="icon-checkbox"></i>
                </label>
                <i class="icon f7-icons">folder_fill</i>
                <div class="treeview-item-label">documents</div>
              </div>
            </div>
            <div class="treeview-item-children">
              <div class="treeview-item">
                <div class="treeview-item-root">
                  <div class="treeview-item-content">
                    <label class="checkbox">
                      <input type="checkbox">
                      <i class="icon-checkbox"></i>
                    </label>
                    <i class="icon f7-icons">document_text_fill</i>
                    <div class="treeview-item-label">cv.docx</div>
                  </div>
                </div>
              </div>
              <div class="treeview-item">
                <div class="treeview-item-root">
                  <div class="treeview-item-content">
                    <label class="checkbox">
                      <input type="checkbox">
                      <i class="icon-checkbox"></i>
                    </label>
                    <i class="icon f7-icons">document_text_fill</i>
                    <div class="treeview-item-label">info.docx</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="treeview-item">
            <div class="treeview-item-root">
              <div class="treeview-item-content">
                <label class="checkbox">
                  <input type="checkbox">
                  <i class="icon-checkbox"></i>
                </label>
                <i class="icon f7-icons">logo_github</i>
                <div class="treeview-item-label">.gitignore</div>
              </div>
            </div>
          </div>
          <div class="treeview-item">
            <div class="treeview-item-root">
              <div class="treeview-item-content">
                <label class="checkbox">
                  <input type="checkbox">
                  <i class="icon-checkbox"></i>
                </label>
                <i class="icon f7-icons">document_text_fill</i>
                <div class="treeview-item-label">index.html</div>
              </div>
            </div>
          </div>
        </div>
      h4 Whole item as toggle
      :code(lang="html")
        <div class="treeview">
          <div class="treeview-item treeview-item-toggle">
            <div class="treeview-item-root">
              <div class="treeview-toggle"></div>
              <div class="treeview-item-content">
                <i class="icon f7-icons">folder_fill</i>
                <div class="treeview-item-label">images</div>
              </div>
            </div>
            <div class="treeview-item-children">
              <div class="treeview-item">
                <div class="treeview-item-root">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">images_fill</i>
                    <div class="treeview-item-label">avatar.png</div>
                  </div>
                </div>
              </div>
              <div class="treeview-item">
                <div class="treeview-item-root">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">images_fill</i>
                    <div class="treeview-item-label">background.jpg</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="treeview-item treeview-item-toggle">
            <div class="treeview-item-root">
              <div class="treeview-toggle"></div>
              <div class="treeview-item-content">
                <i class="icon f7-icons">folder_fill</i>
                <div class="treeview-item-label">documents</div>
              </div>
            </div>
            <div class="treeview-item-children">
              <div class="treeview-item">
                <div class="treeview-item-root">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">document_text_fill</i>
                    <div class="treeview-item-label">cv.docx</div>
                  </div>
                </div>
              </div>
              <div class="treeview-item">
                <div class="treeview-item-root">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">document_text_fill</i>
                    <div class="treeview-item-label">info.docx</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="treeview-item">
            <div class="treeview-item-root">
              <div class="treeview-item-content">
                <i class="icon f7-icons">logo_github</i>
                <div class="treeview-item-label">.gitignore</div>
              </div>
            </div>
          </div>
          <div class="treeview-item">
            <div class="treeview-item-root">
              <div class="treeview-item-content">
                <i class="icon f7-icons">document_text_fill</i>
                <div class="treeview-item-label">index.html</div>
              </div>
            </div>
          </div>
        </div>
      h4 Selectable
      :code(lang="html")
        <div class="treeview">
          <div class="treeview-item">
            <div class="treeview-item-root treeview-item-selectable">
              <div class="treeview-toggle"></div>
              <div class="treeview-item-content">
                <i class="icon f7-icons">folder_fill</i>
                <div class="treeview-item-label">images</div>
              </div>
            </div>
            <div class="treeview-item-children">
              <div class="treeview-item">
                <div class="treeview-item-root treeview-item-selectable">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">images_fill</i>
                    <div class="treeview-item-label">avatar.png</div>
                  </div>
                </div>
              </div>
              <div class="treeview-item">
                <div class="treeview-item-root treeview-item-selectable">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">images_fill</i>
                    <div class="treeview-item-label">background.jpg</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="treeview-item">
            <div class="treeview-item-root treeview-item-selectable">
              <div class="treeview-toggle"></div>
              <div class="treeview-item-content">
                <i class="icon f7-icons">folder_fill</i>
                <div class="treeview-item-label">documents</div>
              </div>
            </div>
            <div class="treeview-item-children">
              <div class="treeview-item">
                <div class="treeview-item-root treeview-item-selectable">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">document_text_fill</i>
                    <div class="treeview-item-label">cv.docx</div>
                  </div>
                </div>
              </div>
              <div class="treeview-item">
                <div class="treeview-item-root treeview-item-selectable">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">document_text_fill</i>
                    <div class="treeview-item-label">info.docx</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="treeview-item">
            <div class="treeview-item-root treeview-item-selectable">
              <div class="treeview-item-content">
                <i class="icon f7-icons">logo_github</i>
                <div class="treeview-item-label">.gitignore</div>
              </div>
            </div>
          </div>
          <div class="treeview-item">
            <div class="treeview-item-root treeview-item-selectable">
              <div class="treeview-item-content">
                <i class="icon f7-icons">document_text_fill</i>
                <div class="treeview-item-label">index.html</div>
              </div>
            </div>
          </div>
        </div>
      :code(lang="js")
        var $ = Dom7;
        $('.tree-view-item-selectable').on('click', function (e) {
          var $targetEl = $(e.target);
          if ($targetEl.closest('.treeview-item-selected').length) return;
          if ($targetEl.is('.treeview-toggle')) return;
          $targetEl.parents('.treeview').find('.treeview-item-selected').removeClass('treeview-item-selected')
          $targetEl.closest('.treeview-item-selectable').addClass('treeview-item-selected')
        })
      h4 Preload children
      p This example use <a href="./router-component.html">Router Component</a> syntax:
      :code(lang="html")
        <div class="treeview">
          <div class="treeview-item treeview-load-children" @treeview:loadchildren="loadChildren">
            <div class="treeview-item-root">
              <div class="treeview-toggle"></div>
              <div class="treeview-item-content">
                <i class="icon f7-icons">persons</i>
                <div class="treeview-item-label">Users</div>
              </div>
            </div>
            <div class="treeview-item-children">
              {{#each loadedChildren}}
              <div class="treeview-item">
                <div class="treeview-item-root">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">person</i>
                    <div class="treeview-item-label">{{name}}</div>
                  </div>
                </div>
              </div>
              {{/each}}
            </div>
          </div>
        </div>
      :code(lang="js")
        return {
          data: function () {
            return {
              loadedChildren: [],
            };
          },
          methods: {
            loadChildren: function (e) {
              var self = this;
              var done = e.detail;
              // emulate 2 seconds loading
              setTimeout(function () {
                // call done() to hide preloader
                done();
                self.$setState({
                  loadedChildren: [
                    {
                      name: 'John Doe',
                    },
                    {
                      name: 'Jane Doe',
                    },
                    {
                      name: 'Calvin Johnson',
                    },
                  ]
                })
              }, 2000);
            },
          },
        }

      h4 With links
      :code(lang="html")
        <div class="treeview">
          <div class="treeview-item">
            <div class="treeview-item-root treeview-item-toggle">
              <div class="treeview-toggle"></div>
              <div class="treeview-item-content">
                <i class="icon f7-icons">data_fill</i>
                <div class="treeview-item-label">Modals</div>
              </div>
            </div>
            <div class="treeview-item-children">
              <div class="treeview-item">
                <a href="/popup/" class="treeview-item-root">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">link</i>
                    <div class="treeview-item-label">Popup</div>
                  </div>
                </a>
              </div>
              <div class="treeview-item">
                <a href="/dialog/" class="treeview-item-root">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">link</i>
                    <div class="treeview-item-label">Dialog</div>
                  </div>
                </a>
              </div>
              <div class="treeview-item">
                <a href="/action-sheet/" class="treeview-item-root">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">link</i>
                    <div class="treeview-item-label">Action Sheet</div>
                  </div>
                </a>
              </div>
            </div>
          </div>
          <div class="treeview-item">
            <div class="treeview-item-root treeview-item-toggle">
              <div class="treeview-toggle"></div>
              <div class="treeview-item-content">
                <i class="icon f7-icons">data_fill</i>
                <div class="treeview-item-label">Navigation Bars</div>
              </div>
            </div>
            <div class="treeview-item-children">
              <div class="treeview-item">
                <a href="/navbar/" class="treeview-item-root">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">link</i>
                    <div class="treeview-item-label">Navbar</div>
                  </div>
                </a>
              </div>
              <div class="treeview-item">
                <a href="/toolbar-tabbar/" class="treeview-item-root">
                  <div class="treeview-item-content">
                    <i class="icon f7-icons">link</i>
                    <div class="treeview-item-label">Toolbar & Tabbar</div>
                  </div>
                </a>
              </div>
            </div>
          </div>
        </div>
